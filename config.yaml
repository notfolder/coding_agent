mcp_servers:
  - mcp_server_name: "github"
    command:
      - "/app/github-mcp-server.cmd"
      - "stdio"
    env:
      GITHUB_TOOLSETS: "all"

  - mcp_server_name: "gitlab"
    command:
      - "npx"
      - "@zereight/mcp-gitlab"
      - "stdio"

  - mcp_server_name: "googlesearch"
    command:
      - "npx"
      - "-y"
      - "@adenot/mcp-google-search"

  - mcp_server_name: "webfetch"
    command:
      - "python"
      - "-m"
      - "mcp_server_fetch"

# APIサーバー設定
api_server:
  api_key: "your-secret-api-key-here"

llm:
  provider: "openai"    # "ollama" | "openai"
  function_calling: true
  lmstudio:
    base_url: "host.docker.internal:1234"
    # base_url: "localhost:1234"
    context_length: 32768
    model: "qwen3-30b-a3b-mlx"
  ollama:
    endpoint: "http://host.docker.internal:11434"
    model: "qwen3-30b-a3b-mlx"
    max_token: 32768
    context_length: 32768
  openai:
    base_url: "https://api.openai.com/v1"
    api_key: "OPENAI_API_KEY"
    model: "gpt-4o"
    max_token: 40960
    context_length: 128000
max_llm_process_num: 1000

# プランニング機能の設定
planning:
  # プランニング機能の有効/無効（デフォルト: true）
  enabled: true
  
  # プランニング戦略（デフォルト: chain_of_thought）
  # 注: 現在は "chain_of_thought" のみサポート。将来の拡張用オプション
  # 選択肢: "chain_of_thought", "hierarchical", "simple"
  strategy: "chain_of_thought"
  
  # 最大サブタスク数（デフォルト: 100）
  max_subtasks: 100
  
  # タスク分解の詳細度（デフォルト: moderate）
  # 注: 将来の拡張用オプション。現在は内部で使用されていません
  # 選択肢: "detailed", "moderate", "minimal"
  decomposition_level: "moderate"
  
  # リフレクション設定
  reflection:
    # リフレクション機能の有効/無効（デフォルト: true）
    enabled: true
    
    # エラー発生時に自動的にリフレクション実行
    trigger_on_error: true
    
    # N回のアクション毎に定期的にリフレクション実行
    # 0の場合は定期リフレクション無効
    trigger_interval: 3
    
    # リフレクションの深さ
    # 注: 将来の拡張用オプション。現在は内部で使用されていません
    # 選択肢: "deep", "moderate", "shallow"
    depth: "moderate"
  
  # 計画修正設定
  revision:
    # 最大計画修正回数
    max_revisions: 3

# コンテキストストレージ設定
# 注: Planning履歴も統合され、contexts/{running|completed}/{task_uuid}/planning/ に保存されます
context_storage:
  enabled: true
  base_dir: "contexts"
  compression_threshold: 0.7
  keep_recent_messages: 5
  cleanup_days: 30
  summary_prompt: |
    あなたは会話履歴を要約するアシスタントです。
    以下のメッセージ履歴を簡潔かつ包括的に要約してください。
    
    要約には以下を含めてください：
    1. 重要な決定事項
    2. 実施したコード変更
    3. 発生した問題とその解決
    4. 残存タスク
    
    元の30-40%の長さを目標としてください。
    
    === 要約対象メッセージ ===
    {messages}
    
    要約のみを出力してください。

github:
  owner:     "notfolder"
  bot_label: "coding agent"
  processing_label: "coding agent processing"
  done_label: "coding agent done"
  paused_label: "coding agent paused"
  query: 'state:open archived:false sort:updated-desc sort:updated-desc'

gitlab:
  owner:     "notfolder"
  bot_label: "coding agent"
  processing_label: "coding agent processing"
  done_label: "coding agent done"
  paused_label: "coding agent paused"
  project_id: "coding-agent-project"
  query: ''

scheduling:
  interval: 300  # 秒

# 一時停止・リジューム機能の設定
pause_resume:
  # 一時停止機能の有効化
  enabled: true
  
  # 停止シグナルファイルのパス
  signal_file: "contexts/pause_signal"
  
  # 停止チェック間隔（LLMループのN回ごとにチェック）
  check_interval: 1
  
  # 一時停止タスクの有効期限（日数）
  paused_task_expiry_days: 30
  
  # 一時停止状態ディレクトリ
  paused_dir: "contexts/paused"

# RabbitMQを使う場合はtrue、使わない場合はfalse
use_rabbitmq: true
rabbitmq:
  host: host.docker.internal
  port: 5672
  user: guest
  password: guest
  queue: coding_agent_tasks
