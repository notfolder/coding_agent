mcp_servers:
  - mcp_server_name: "github"
    command:
      - "/app/github-mcp-server.cmd"
      - "stdio"
    env:
      GITHUB_TOOLSETS: "all"

  - mcp_server_name: "gitlab"
    command:
      - "npx"
      - "@zereight/mcp-gitlab"
      - "stdio"

  - mcp_server_name: "googlesearch"
    command:
      - "npx"
      - "-y"
      - "@adenot/mcp-google-search"

  - mcp_server_name: "webfetch"
    command:
      - "python"
      - "-m"
      - "mcp_server_fetch"

# データベース設定（SQLAlchemy）
database:
  # 接続URL
  # SQLite: sqlite:///./data/users.db
  # PostgreSQL: postgresql://user:password@localhost/dbname
  # MySQL: mysql+pymysql://user:password@localhost/dbname
  url: "sqlite:///./data/users.db"
  
  # SQLログ出力
  echo: false
  
  # コネクションプール設定（PostgreSQL/MySQL用）
  pool_size: 5
  max_overflow: 10

# Active Directory認証設定
active_directory:
  server:
    host: "openldap"  # Docker内部ネットワーク名（ローカル開発時は"localhost"）
    port: 389  # 非暗号化LDAP（テスト用）
    use_ssl: false  # テスト環境ではfalse
  bind:
    dn: "cn=admin,dc=example,dc=com"
    password_env: "AD_BIND_PASSWORD"  # admin_password
  user_search:
    base_dn: "ou=people,dc=example,dc=com"
    filter: "(uid={username})"  # sAMAccountNameではなくuid
    attributes:
      uid: "uid"
      email: "userPrincipalName"
      display_name: "cn"
  timeout:
    connect: 5
    operation: 10

# 暗号化設定
encryption:
  key_env: "ENCRYPTION_KEY"

# APIサーバー設定
api_server:
  api_key: "your-secret-api-key-here"

llm:
  provider: "openai"    # "ollama" | "openai"
  function_calling: true
  lmstudio:
    base_url: "host.docker.internal:1234"
    # base_url: "localhost:1234"
    context_length: 32768
    model: "qwen3-30b-a3b-mlx"
  ollama:
    endpoint: "http://host.docker.internal:11434"
    model: "qwen3-30b-a3b-mlx"
    max_token: 32768
  openai:
    base_url: "https://api.openai.com/v1"
    api_key: "OPENAI_API_KEY"
    model: "gpt-4o"
    max_token: 40960
max_llm_process_num: 1000

github:
  owner:     "notfolder"
  bot_label: "coding agent"
  processing_label: "coding agent processing"
  done_label: "coding agent done"
  query: 'state:open archived:false sort:updated-desc sort:updated-desc'

gitlab:
  owner:     "notfolder"
  bot_label: "coding agent"
  processing_label: "coding agent processing"
  done_label: "coding agent done"
  project_id: "coding-agent-project"
  query: ''

scheduling:
  interval: 300  # 秒

# RabbitMQを使う場合はtrue、使わない場合はfalse
use_rabbitmq: true
rabbitmq:
  host: host.docker.internal
  port: 5672
  user: guest
  password: guest
  queue: coding_agent_tasks
